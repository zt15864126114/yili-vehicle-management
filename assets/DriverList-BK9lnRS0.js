import{d as Q,r as p,c as $,h as W,e as a,w as l,b as i,o as X,f as _,j as o,t as m,B as k,_ as Z}from"./index-xhAZHyxu.js";const ee={class:"driver-list"},ae={class:"card-header"},le={class:"table-container"},te={class:"pagination-container"},ne={class:"dialog-footer"},oe={class:"dialog-footer"},se="calc(100vh - 330px)",re=Q({__name:"DriverList",setup(ie){const N=p(""),x=(t=6)=>{const e=new Date,r=new Date(e.getTime()-t*30*24*60*60*1e3),v=r.getTime()+Math.random()*(e.getTime()-r.getTime());return new Date(v).toISOString().split("T")[0]},z=()=>{const t=[],e=["兖州-济南-兖州","兖州-泰安-兖州","兖州-枣庄-兖州","兖州-临沂-兖州","兖州-青岛-兖州","兖州-潍坊-兖州"],r=["鲁H85697","鲁H67M89","鲁H2N680","鲁H1U579","鲁HK7K11","鲁H9M229","鲁H3S338","鲁H4K472"];for(let v=0;v<5;v++)t.push({date:x(1),vehicleNumber:r[Math.floor(Math.random()*r.length)],mileage:Math.floor(Math.random()*300)+100,route:e[Math.floor(Math.random()*e.length)]});return t.sort((v,u)=>new Date(u.date).getTime()-new Date(v.date).getTime())},g=p(Array.from({length:25},(t,e)=>({id:String(e+1),name:["张志强","李建国","王大明","刘海洋","赵国强","孙志远","周建军","吴海波","郑光明","马建设","陈志强","杨海龙","徐国庆","朱建华","胡志明","冯海涛","邓建业","彭海军","邹国梁","韩建军","萧志远","唐海波","许国强","范建设","金海龙"][e],licenseNumber:`37280${Math.floor(Math.random()*2)+1}${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`,phoneNumber:`1${Math.floor(Math.random()*5)+3}${Math.floor(Math.random()*1e8).toString().padStart(8,"0")}`,licenseExpireDate:new Date(new Date().setFullYear(new Date().getFullYear()+Math.floor(Math.random()*2)+1)).toISOString().split("T")[0],drivingYears:Math.floor(Math.random()*10)+5,status:["available","onDuty","leave"][Math.floor(Math.random()*3)],remarks:""}))),f=p(!1),w=p("add"),s=p({name:"",licenseNumber:"",phoneNumber:"",licenseExpireDate:"",drivingYears:0,status:"available"}),C=t=>({available:"success",onDuty:"warning",leave:"info"})[t],R=()=>{w.value="add",f.value=!0,Object.assign(s.value,{name:"",licenseNumber:"",phoneNumber:"",licenseExpireDate:"",drivingYears:0,status:"available"})},I=t=>{N.value=t.id,Object.assign(s.value,{...t,drivingYears:t.drivingYears||0}),f.value=!0},P=t=>{k.success("删除成功"),g.value=g.value.filter(e=>e.id!==t.id)},j=t=>{d.value={...t,lastPhysicalDate:x(3),drivingRecords:z()},V.value=!0},B=()=>{if(w.value==="add"){const t={id:String(Date.now()),...s.value,drivingYears:s.value.drivingYears||0,remarks:""};g.value.unshift(t),k.success("新增驾驶员成功")}else{const t=g.value.findIndex(e=>e.id===N.value);t!==-1&&(g.value[t]={...g.value[t],...s.value,drivingYears:s.value.drivingYears||0},k.success("更新驾驶员信息成功"))}f.value=!1},b=p(1),h=p(10),S=$(()=>g.value.filter(t=>{const e=!D.value.name||t.name.includes(D.value.name),r=!D.value.status||t.status===D.value.status;return e&&r})),F=$(()=>{const t=(b.value-1)*h.value,e=t+h.value;return S.value.slice(t,e)}),O=t=>{h.value=t,b.value=1},K=t=>{b.value=t},D=p({name:"",status:""}),V=p(!1),d=p({name:"",licenseNumber:"",phoneNumber:"",drivingYears:0,licenseExpireDate:"",status:"",lastPhysicalDate:"",remarks:"",drivingRecords:[]}),Y={available:"可用",onDuty:"在岗",leave:"请假"};return(t,e)=>{const r=i("el-button"),v=i("el-form"),u=i("el-table-column"),T=i("el-tag"),E=i("el-table"),A=i("el-pagination"),L=i("el-card"),M=i("el-input"),y=i("el-form-item"),q=i("el-date-picker"),G=i("el-input-number"),U=i("el-dialog"),c=i("el-descriptions-item"),J=i("el-descriptions");return X(),W("div",ee,[a(L,{class:"driver-card"},{header:l(()=>[_("div",ae,[e[12]||(e[12]=_("span",null,"驾驶员管理",-1)),a(r,{type:"primary",onClick:R},{default:l(()=>e[11]||(e[11]=[o("新增驾驶员")])),_:1})])]),default:l(()=>[a(v,{inline:!0,model:D.value,class:"search-form"},null,8,["model"]),_("div",le,[a(E,{data:F.value,style:{width:"100%"},height:se},{default:l(()=>[a(u,{prop:"name",label:"姓名"}),a(u,{prop:"licenseNumber",label:"驾驶证号"}),a(u,{prop:"phoneNumber",label:"联系电话"}),a(u,{prop:"licenseExpireDate",label:"证件到期日"}),a(u,{prop:"drivingYears",label:"驾龄"},{default:l(({row:n})=>[o(m(n.drivingYears)+"年 ",1)]),_:1}),a(u,{prop:"status",label:"状态"},{default:l(({row:n})=>[a(T,{type:C(n.status)},{default:l(()=>[o(m(Y[n.status]),1)]),_:2},1032,["type"])]),_:1}),a(u,{label:"操作",width:"200"},{default:l(({row:n})=>[a(r,{type:"primary",link:"",onClick:H=>j(n)},{default:l(()=>e[13]||(e[13]=[o("查看")])),_:2},1032,["onClick"]),a(r,{type:"primary",link:"",onClick:H=>I(n)},{default:l(()=>e[14]||(e[14]=[o("编辑")])),_:2},1032,["onClick"]),a(r,{type:"danger",link:"",onClick:H=>P(n)},{default:l(()=>e[15]||(e[15]=[o("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_("div",te,[a(A,{"current-page":b.value,"onUpdate:currentPage":e[0]||(e[0]=n=>b.value=n),"page-size":h.value,"onUpdate:pageSize":e[1]||(e[1]=n=>h.value=n),"page-sizes":[10,15,20,30],total:S.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:O,onCurrentChange:K,background:""},null,8,["current-page","page-size","total"])])]),_:1}),a(U,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=n=>f.value=n),title:w.value==="add"?"新增驾驶员":"编辑驾驶员",width:"500px"},{footer:l(()=>[_("span",ne,[a(r,{onClick:e[7]||(e[7]=n=>f.value=!1)},{default:l(()=>e[16]||(e[16]=[o("取消")])),_:1}),a(r,{type:"primary",onClick:B},{default:l(()=>e[17]||(e[17]=[o("确定")])),_:1})])]),default:l(()=>[a(v,{model:s.value,"label-width":"100px"},{default:l(()=>[a(y,{label:"姓名"},{default:l(()=>[a(M,{modelValue:s.value.name,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.name=n)},null,8,["modelValue"])]),_:1}),a(y,{label:"驾驶证号"},{default:l(()=>[a(M,{modelValue:s.value.licenseNumber,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.licenseNumber=n)},null,8,["modelValue"])]),_:1}),a(y,{label:"联系电话"},{default:l(()=>[a(M,{modelValue:s.value.phoneNumber,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.phoneNumber=n)},null,8,["modelValue"])]),_:1}),a(y,{label:"证件到期日"},{default:l(()=>[a(q,{modelValue:s.value.licenseExpireDate,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.licenseExpireDate=n),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1}),a(y,{label:"驾龄"},{default:l(()=>[a(G,{modelValue:s.value.drivingYears,"onUpdate:modelValue":e[6]||(e[6]=n=>s.value.drivingYears=n),min:1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(U,{title:"驾驶员详情",modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=n=>V.value=n),width:"600px",class:"view-dialog"},{footer:l(()=>[_("span",oe,[a(r,{onClick:e[9]||(e[9]=n=>V.value=!1)},{default:l(()=>e[18]||(e[18]=[o("关闭")])),_:1})])]),default:l(()=>[a(J,{column:2,border:""},{default:l(()=>[a(c,{label:"姓名"},{default:l(()=>[o(m(d.value.name),1)]),_:1}),a(c,{label:"驾驶证号"},{default:l(()=>[o(m(d.value.licenseNumber),1)]),_:1}),a(c,{label:"联系电话"},{default:l(()=>[o(m(d.value.phoneNumber),1)]),_:1}),a(c,{label:"驾龄"},{default:l(()=>[o(m(d.value.drivingYears)+" 年 ",1)]),_:1}),a(c,{label:"驾驶证到期日"},{default:l(()=>[o(m(d.value.licenseExpireDate),1)]),_:1}),a(c,{label:"状态"},{default:l(()=>[a(T,{type:C(d.value.status)},{default:l(()=>[o(m(Y[d.value.status]),1)]),_:1},8,["type"])]),_:1}),a(c,{label:"最近体检日期",span:2},{default:l(()=>[o(m(d.value.lastPhysicalDate||"暂无记录"),1)]),_:1}),a(c,{label:"驾驶记录",span:2},{default:l(()=>[a(E,{data:d.value.drivingRecords||[],style:{width:"100%"}},{default:l(()=>[a(u,{prop:"date",label:"日期",width:"120"}),a(u,{prop:"vehicleNumber",label:"车牌号",width:"120"}),a(u,{prop:"mileage",label:"行驶里程",width:"100"},{default:l(({row:n})=>[o(m(n.mileage)+" km ",1)]),_:1}),a(u,{prop:"route",label:"行驶路线"})]),_:1},8,["data"])]),_:1}),a(c,{label:"备注",span:2},{default:l(()=>[o(m(d.value.remarks||"暂无备注"),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),de=Z(re,[["__scopeId","data-v-e307603c"]]);export{de as default};
