import{M as K}from"./mock-CdG3V9JI.js";import{v as Q}from"./vehicle-DpWRqzrQ.js";import{d as W}from"./driver-C9OQhe0x.js";import{d as X,r as g,B as U,c as Y,h as b,e,w as a,b as r,o as c,f as T,j as m,F as V,i as I,t as C,E as w,a as y,_ as Z}from"./index-uYQj0kvs.js";const ee=K.mock({"records|30":[{"id|+1":1,"vehicleId|1-20":1,"driverId|1-10":1,startTime:'@datetime("yyyy-MM-dd HH:mm:ss")',endTime:'@datetime("yyyy-MM-dd HH:mm:ss")',destination:"@city(true)","purpose|1":["货物运输","员工接送","商务用车","其他"],"mileage|100-1000":1,"status|1":["ongoing","completed","cancelled"]}]}),le={class:"trip-list"},te={class:"card-header"},ae={class:"dialog-footer"},oe=X({__name:"TripList",setup(de){const _=g([]),k=g(Q.vehicles),h=g(W.drivers),f=g(!1),d=U({vehicleId:"",driverId:"",status:""}),n=U({vehicleId:"",driverId:"",startTime:"",destination:"",purpose:""}),x=Y(()=>_.value.filter(o=>{const l=!d.vehicleId||o.vehicleId===d.vehicleId,s=!d.driverId||o.driverId===d.driverId,u=!d.status||o.status===d.status;return l&&s&&u})),N=o=>{const l=k.value.find(s=>s.id===o);return l?l.plateNumber:"-"},D=o=>{const l=h.value.find(s=>s.id===o);return l?l.name:"-"},M=o=>({ongoing:"warning",completed:"success",cancelled:"info"})[o],B=o=>({ongoing:"进行中",completed:"已完成",cancelled:"已取消"})[o],F=()=>{},H=()=>{Object.assign(d,{vehicleId:"",driverId:"",status:""})},j=()=>{f.value=!0,Object.assign(n,{vehicleId:"",driverId:"",startTime:"",destination:"",purpose:""})},E=o=>{o.status="completed",o.endTime=new Date().toISOString(),w.success("出车记录已完成")},L=o=>{o.status="cancelled",w.success("出车记录已取消")},O=()=>{const o={...n,id:String(_.value.length+1),status:"ongoing",mileage:0,endTime:""};_.value.unshift(o),f.value=!1,w.success("新增出车记录成功")};return _.value=ee.records,(o,l)=>{const s=r("el-button"),u=r("el-option"),v=r("el-select"),p=r("el-form-item"),S=r("el-form"),i=r("el-table-column"),R=r("el-tag"),$=r("el-button-group"),A=r("el-table"),P=r("el-card"),q=r("el-date-picker"),z=r("el-input"),G=r("el-dialog");return c(),b("div",le,[e(P,null,{header:a(()=>[T("div",te,[l[11]||(l[11]=T("span",null,"出车记录管理",-1)),e(s,{type:"primary",onClick:j},{default:a(()=>l[10]||(l[10]=[m("新增出车记录")])),_:1})])]),default:a(()=>[e(S,{inline:!0,class:"search-form"},{default:a(()=>[e(p,{label:"车牌号"},{default:a(()=>[e(v,{modelValue:d.vehicleId,"onUpdate:modelValue":l[0]||(l[0]=t=>d.vehicleId=t),placeholder:"请选择车辆",clearable:""},{default:a(()=>[(c(!0),b(V,null,I(k.value,t=>(c(),y(u,{key:t.id,label:t.plateNumber,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"驾驶员"},{default:a(()=>[e(v,{modelValue:d.driverId,"onUpdate:modelValue":l[1]||(l[1]=t=>d.driverId=t),placeholder:"请选择驾驶员",clearable:""},{default:a(()=>[(c(!0),b(V,null,I(h.value,t=>(c(),y(u,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"状态"},{default:a(()=>[e(v,{modelValue:d.status,"onUpdate:modelValue":l[2]||(l[2]=t=>d.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(u,{label:"进行中",value:"ongoing"}),e(u,{label:"已完成",value:"completed"}),e(u,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:a(()=>[e(s,{type:"primary",onClick:F},{default:a(()=>l[12]||(l[12]=[m("查询")])),_:1}),e(s,{onClick:H},{default:a(()=>l[13]||(l[13]=[m("重置")])),_:1})]),_:1})]),_:1}),e(A,{data:x.value,border:""},{default:a(()=>[e(i,{prop:"id",label:"记录编号",width:"100"}),e(i,{label:"车牌号",width:"120"},{default:a(({row:t})=>[m(C(N(t.vehicleId)),1)]),_:1}),e(i,{label:"驾驶员",width:"100"},{default:a(({row:t})=>[m(C(D(t.driverId)),1)]),_:1}),e(i,{prop:"startTime",label:"出发时间",width:"160"}),e(i,{prop:"endTime",label:"返回时间",width:"160"}),e(i,{prop:"destination",label:"目的地"}),e(i,{prop:"purpose",label:"用途"}),e(i,{prop:"mileage",label:"里程(km)",width:"100"}),e(i,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[e(R,{type:M(t.status)},{default:a(()=>[m(C(B(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"操作",width:"200"},{default:a(({row:t})=>[e($,null,{default:a(()=>[e(s,{type:"primary",disabled:t.status!=="ongoing",onClick:J=>E(t)},{default:a(()=>l[14]||(l[14]=[m(" 完成 ")])),_:2},1032,["disabled","onClick"]),e(s,{type:"danger",disabled:t.status!=="ongoing",onClick:J=>L(t)},{default:a(()=>l[15]||(l[15]=[m(" 取消 ")])),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),e(G,{modelValue:f.value,"onUpdate:modelValue":l[9]||(l[9]=t=>f.value=t),title:"新增出车记录",width:"600px"},{footer:a(()=>[T("span",ae,[e(s,{onClick:l[8]||(l[8]=t=>f.value=!1)},{default:a(()=>l[16]||(l[16]=[m("取消")])),_:1}),e(s,{type:"primary",onClick:O},{default:a(()=>l[17]||(l[17]=[m("确定")])),_:1})])]),default:a(()=>[e(S,{model:n,"label-width":"100px"},{default:a(()=>[e(p,{label:"车辆"},{default:a(()=>[e(v,{modelValue:n.vehicleId,"onUpdate:modelValue":l[3]||(l[3]=t=>n.vehicleId=t),placeholder:"请选择车辆"},{default:a(()=>[(c(!0),b(V,null,I(k.value,t=>(c(),y(u,{key:t.id,label:t.plateNumber,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"驾驶员"},{default:a(()=>[e(v,{modelValue:n.driverId,"onUpdate:modelValue":l[4]||(l[4]=t=>n.driverId=t),placeholder:"请选择驾驶员"},{default:a(()=>[(c(!0),b(V,null,I(h.value,t=>(c(),y(u,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"出发时间"},{default:a(()=>[e(q,{modelValue:n.startTime,"onUpdate:modelValue":l[5]||(l[5]=t=>n.startTime=t),type:"datetime",placeholder:"选择出发时间"},null,8,["modelValue"])]),_:1}),e(p,{label:"目的地"},{default:a(()=>[e(z,{modelValue:n.destination,"onUpdate:modelValue":l[6]||(l[6]=t=>n.destination=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"用途"},{default:a(()=>[e(v,{modelValue:n.purpose,"onUpdate:modelValue":l[7]||(l[7]=t=>n.purpose=t),placeholder:"请选择用途"},{default:a(()=>[e(u,{label:"货物运输",value:"货物运输"}),e(u,{label:"员工接送",value:"员工接送"}),e(u,{label:"商务用车",value:"商务用车"}),e(u,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ie=Z(oe,[["__scopeId","data-v-db48faf8"]]);export{ie as default};
